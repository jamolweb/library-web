generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Book {
  id         Int         @id @default(autoincrement())
  title      String
  author     String
  quantity   Int         @default(1)
  available  Int         @default(1)
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  borrowings Borrowing[]
}

model Student {
  id          Int         @id @default(autoincrement())
  fullName    String
  description String? // Ensure this line is present
  phoneNumber String // Phone number as a string
  grade       String
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  borrowings  Borrowing[]
}

model Teacher {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  fullName  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Borrowing {
  id         Int          @id @default(autoincrement())
  bookId     Int
  studentId  Int
  borrowDate DateTime     @default(now())
  dueDate    DateTime
  returnDate DateTime?
  status     BorrowStatus @default(BORROWED)
  book       Book         @relation(fields: [bookId], references: [id])
  student    Student      @relation(fields: [studentId], references: [id])
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
}

enum BorrowStatus {
  BORROWED
  RETURNED
  OVERDUE
}
